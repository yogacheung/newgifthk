/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function v(a,b){function c(){}c.prototype=a;var d=new c,f;for(f in b)d[f]=b[f];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function Zb(a){return a instanceof Array?function(){return p.iter(a)}:"function"==typeof a.iterator?$(a,a.iterator):a.iterator}function $(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=ic++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var s=function(){return F.__string_rec(this,"")},U=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};U.__name__=!0;U.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,
len:this.r.m[0].length}},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},__class__:U};var p=function(){};p.__name__=!0;p.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};p.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};p.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};p.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<
this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ra=function(){};Ra.__name__=!0;Ra.array=function(a){for(var b=[],a=Zb(a)();a.hasNext();){var c=a.next();b.push(c)}return b};Ra.count=function(a,b){var c=0;if(null==b)for(var d=Zb(a)();d.hasNext();)d.next(),c++;else for(d=Zb(a)();d.hasNext();){var f=d.next();b(f)&&c++}return c};var B=function(){};B.__name__=!0;B.main=function(){j.init();e.defaultOrientation=Y.Landscape;e.systemBgColor=163232;e.maskRootCont=!1;e.rootContYAlign="top";
e.useMouseHandCursor=!0;B.parseExtData()};B.onInit=function(){e.goToScene((new vb).root)};B.parseExtData=function(){B.qs=$b.parseQueryString(j._platform.getExternal().call("location.search.toString").substr(1),"rid");var a=new N;""==B.qs?a.add("card","XML_TEMPLATE/card.xml"):a.add("card","RECIPIENT_TEMPLATES/"+B.qs+".xml");j._platform.loadAssetPack(a).get(function(a){B.xmlData=new Sa(k.parse(a.getFile("card").toString()).firstElement());a=new N;""!=B.qs?a.add("logo",B.xmlData.node.resolve("logo").get_innerData().toString()):
a.add("logo","XML_TEMPLATE/logo.png");a.add("soundtrack","music/"+B.xmlData.node.resolve("music").get_innerData().toString()+".mp3");a.add("soundtrack","music/"+B.xmlData.node.resolve("music").get_innerData().toString()+".ogg");B.logoUrl=B.xmlData.node.resolve("url").get_innerData();B.msg1Text=B.xmlData.node.resolve("principal").get_innerData();B.msg2Text=B.xmlData.node.resolve("message").get_innerData();e.extManifest=a;(new e(1920,1080)).init.connect(B.onInit).once()})};var ac=function(){};ac.__name__=
!0;Math.__name__=!0;var J=function(){};J.__name__=!0;J.field=function(a,b){try{return a[b]}catch(c){return null}};J.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};J.callMethod=function(a,b,c){return b.apply(a,c)};J.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};var z=function(){};z.__name__=!0;z.is=function(a,b){return F.__instanceof(a,
b)};z.instance=function(a,b){return a instanceof b?a:null};z.string=function(a){return F.__string_rec(a,"")};z["int"]=function(a){return a|0};z.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==p.cca(a,1)||88==p.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};z.parseFloat=function(a){return parseFloat(a)};z.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)};var Ta=function(){this.b=""};Ta.__name__=!0;Ta.prototype={add:function(a){this.b+=z.string(a)},addSub:function(a,b,c){this.b=
null==c?this.b+p.substr(a,b,null):this.b+p.substr(a,b,c)},__class__:Ta};var D=function(){};D.__name__=!0;D.startsWith=function(a,b){return a.length>=b.length&&p.substr(a,0,b.length)==b};D.isSpace=function(a,b){var c=p.cca(a,b);return 8<c&&14>c||32==c};D.ltrim=function(a){for(var b=a.length,c=0;c<b&&D.isSpace(a,c);)c++;return 0<c?p.substr(a,c,b-c):a};D.rtrim=function(a){for(var b=a.length,c=0;c<b&&D.isSpace(a,b-c-1);)c++;return 0<c?p.substr(a,0,b-c):a};D.trim=function(a){return D.ltrim(D.rtrim(a))};
D.replace=function(a,b,c){return a.split(b).join(c)};D.fastCodeAt=function(a,b){return a.charCodeAt(b)};var k=function(){};k.__name__=!0;k.parse=function(a){return fa.parse(a)};k.createElement=function(a){var b=new k;b.nodeType=k.Element;b._children=[];b._attributes=new T;b.set_nodeName(a);return b};k.createPCData=function(a){var b=new k;b.nodeType=k.PCData;b.set_nodeValue(a);return b};k.createCData=function(a){var b=new k;b.nodeType=k.CData;b.set_nodeValue(a);return b};k.createComment=function(a){var b=
new k;b.nodeType=k.Comment;b.set_nodeValue(a);return b};k.createDocType=function(a){var b=new k;b.nodeType=k.DocType;b.set_nodeValue(a);return b};k.createProcessingInstruction=function(a){var b=new k;b.nodeType=k.ProcessingInstruction;b.set_nodeValue(a);return b};k.createDocument=function(){var a=new k;a.nodeType=k.Document;a._children=[];return a};k.prototype={get_nodeName:function(){if(this.nodeType!=k.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=
k.Element)throw"bad nodeType";return this._nodeName=a},get_nodeValue:function(){if(this.nodeType==k.Element||this.nodeType==k.Document)throw"bad nodeType";return this._nodeValue},set_nodeValue:function(a){if(this.nodeType==k.Element||this.nodeType==k.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=k.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=k.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=
k.Element)throw"bad nodeType";return this._attributes.exists(a)},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==k.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,
b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==k.Element)return this.cur=a,c}return null}}},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];if(d.nodeType==k.Element&&d._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];b++;if(d.nodeType==k.Element&&d._nodeName==a)return this.cur=b,d}return null}}},
firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];if(c.nodeType==k.Element)return c;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&p.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:k,__properties__:{set_nodeValue:"set_nodeValue",get_nodeValue:"get_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var aa=function(){};
aa.__name__=!0;aa.prototype={__class__:aa};var t=function(){this._flags=0;this.owner=this.next=null};t.__name__=!0;t.__interfaces__=[aa];t.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:t,__properties__:{get_name:"get_name"}};var da=function(){t.call(this);this._disposables=[]};da.__name__=!0;da.__super__=t;da.prototype=v(t.prototype,
{get_name:function(){return"Disposer_6"},add:function(a){this._disposables.push(a);return this},connect1:function(a,b){this.add(a.connect(b));return this},onRemoved:function(){this.freeDisposables()},dispose:function(){t.prototype.dispose.call(this);this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}},__class__:da});var I=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap=
{}};I.__name__=!0;I.__interfaces__=[aa];I.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],
0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;
break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:I};var bc=function(){};bc.__name__=!0;var wb=function(){};wb.__name__=!0;wb.prototype={__class__:wb};var ga=function(){};ga.__name__=!0;ga.__interfaces__=[wb];ga.prototype={init:function(){var a=this;o.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex",
"0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new sa(b);this._pointer=new K;this._mouse=new Ua(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new ta;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,f=function(c){if(!(1E3>c.timeStamp-d)){var f=b.getBoundingClientRect(),
g=a.getX(c,f),f=a.getY(c,f);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(g,f,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(g,f);break;case "mouseup":a._mouse.submitUp(g,f,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(g,f,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",f,!1);window.addEventListener("mousemove",f,!1);window.addEventListener("mouseup",f,
!1);b.addEventListener("mousewheel",f,!1);b.addEventListener("DOMMouseScroll",f,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var g="undefined"!=typeof window.ontouchstart,f="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(g||f){var i=new Va(this._pointer,g?4:window.navigator.msMaxTouchPoints);this._touch=i;f=function(b){var c;c=g?b.changedTouches:[b];var f=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();
o.SHOULD_HIDE_MOBILE_BROWSER&&o.hideMobileBrowser();for(b=0;b<c.length;){var e=c[b];++b;var l=a.getX(e,f),m=a.getY(e,f);i.submitDown((g?e.identifier:e.pointerId)|0,l,m)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)e=c[b],++b,l=a.getX(e,f),m=a.getY(e,f),i.submitMove((g?e.identifier:e.pointerId)|0,l,m);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)e=c[b],++b,l=a.getX(e,f),m=a.getY(e,f),i.submitUp((g?
e.identifier:e.pointerId)|0,l,m)}};g?(b.addEventListener("touchstart",f,!1),b.addEventListener("touchmove",f,!1),b.addEventListener("touchend",f,!1),b.addEventListener("touchcancel",f,!1)):(b.addEventListener("MSPointerDown",f,!1),b.addEventListener("MSPointerMove",f,!1),b.addEventListener("MSPointerUp",f,!1))}else this._touch=new Wa;var e=window.onerror;window.onerror=function(a,b,c){j.uncaughtError.emit(a);return null!=e?e(a,b,c):!1};var w=o.loadExtension("hidden",window.document);null!=w.value?
(f=function(){j.hidden.set__(J.field(window.document,w.field))},f(null),window.document.addEventListener(w.prefix+"visibilitychange",f,!1)):(f=function(a){j.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",f,!1),window.addEventListener("pagehide",f,!1));j.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var h=o.loadExtension("requestAnimationFrame").value,f=o.loadExtension("requestAnimationFrame").prefix;if(null!=h&&
"webkit"!=f){var m=window.performance,k=null!=m&&o.polyfill("now",m);k?this._lastUpdate=m.now():null;var n=null,n=function(c){a.update(k?m.now():c);h(n,b)};h(n,b)}else window.setInterval(function(){a.update(Date.now())},16);Ba.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new y(this,a)).promise},getStage:function(){return this._stage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;j.hidden._value||(this._skipFrame?
this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getWeb:function(){null==this._web&&(this._web=new Xa(this._container));return this._web},getExternal:function(){null==this._external&&(this._external=new Ya);return this._external},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-
b.top)*this._stage.get_height()/b.height},createRenderer:function(a){return new ua(a)},__class__:ga};var O=function(a,b){this._value=a;this._changed=null!=b?new Ca(b):null};O.__name__=!0;O.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new Ca);return this._changed},__class__:O,__properties__:{get_changed:"get_changed",
set__:"set__"}};var va=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};va.__name__=!0;va.__interfaces__=[aa];va.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:va};var H=function(a){this._head=null!=a?new va(this,a):null;this._deferredTasks=null};H.__name__=!0;H.prototype={connectImpl:function(a,b){var c=this,d=new va(this,a);this._head==H.DISPATCHING_SENTINEL?
this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==H.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new xb(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=H.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),
a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:H};var Ca=function(a){H.call(this,a)};Ca.__name__=!0;Ca.__super__=H;Ca.prototype=v(H.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==
H.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:Ca});var A=function(a){H.call(this,a)};A.__name__=!0;A.__super__=H;A.prototype=v(H.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==H.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},
emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:A});var n=function(a,b){this._behavior=null;O.call(this,a,b)};n.__name__=!0;n.__super__=O;n.prototype=v(O.prototype,{set__:function(a){this._behavior=null;return O.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(O.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,
b,c){this.set_behavior(new Da(this._value,a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:n,__properties__:v(O.prototype.__properties__,{set_behavior:"set_behavior"})});var j=function(){};j.__name__=!0;j.init=function(){j._calledInit||(j._platform.init(),j._calledInit=!0)};j.loadAssetPack=function(a){return j._platform.loadAssetPack(a)};var Ba=function(){};Ba.__name__=!0;Ba.info=function(){null};Ba.__super__=bc;Ba.prototype=v(bc.prototype,{__class__:Ba});var yb=
function(){this._realDt=0};yb.__name__=!0;yb.__super__=t;yb.prototype=v(t.prototype,{get_name:function(){return"SpeedAdjuster_10"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:yb});var zb=function(){};zb.__name__=!0;zb.prototype={__class__:zb};var G=function(){};G.__name__=!0;G.linear=function(a){return a};G.quadIn=function(a){return a*a};G.quadOut=function(a){return a*(2-a)};G.cubeIn=function(a){return a*a*a};G.cubeOut=function(a){return 1+
--a*a*a};G.backOut=function(a){return 1- --a*a*(-2.70158*a-1.70158)};var Da=function(a,b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:G.linear};Da.__name__=!0;Da.__interfaces__=[zb];Da.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Da};var ma=function(){};ma.__name__=!0;ma.__interfaces__=
[aa];ma.prototype={__class__:ma};var h={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),WEBP:["WEBP",0]};h.WEBP.toString=s;h.WEBP.__enum__=h;h.JXR=["JXR",1];h.JXR.toString=s;h.JXR.__enum__=h;h.PNG=["PNG",2];h.PNG.toString=s;h.PNG.__enum__=h;h.JPG=["JPG",3];h.JPG.toString=s;h.JPG.__enum__=h;h.GIF=["GIF",4];h.GIF.toString=s;h.GIF.__enum__=h;h.DDS=["DDS",5];h.DDS.toString=s;h.DDS.__enum__=h;h.PVR=["PVR",6];h.PVR.toString=s;h.PVR.__enum__=h;h.PKM=["PKM",
7];h.PKM.toString=s;h.PKM.__enum__=h;h.MP3=["MP3",8];h.MP3.toString=s;h.MP3.__enum__=h;h.M4A=["M4A",9];h.M4A.toString=s;h.M4A.__enum__=h;h.OPUS=["OPUS",10];h.OPUS.toString=s;h.OPUS.__enum__=h;h.OGG=["OGG",11];h.OGG.toString=s;h.OGG.__enum__=h;h.WAV=["WAV",12];h.WAV.toString=s;h.WAV.__enum__=h;h.Data=["Data",13];h.Data.toString=s;h.Data.__enum__=h;var Ab=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};Ab.__name__=!0;Ab.prototype={__class__:Ab};var Za=function(){};Za.__name__=!0;
Za.__interfaces__=[aa];Za.prototype={__class__:Za};var $a=function(){};$a.__name__=!0;$a.__interfaces__=[ma];$a.prototype={__class__:$a};var N=function(){this._localBase=this._remoteBase=null;this._entries=[]};N.__name__=!0;N.fromAssets=function(a,b){null==b&&(b=!0);var c=J.field(cc.getType(N).assets[0],a);if(null==c){if(b)throw L.withFields("Missing asset pack",["name",a]);return null}var d=new N;d.set_localBase("assets");for(var f=0;f<c.length;){var g=c[f];++f;var i=g.name,e=a+"/"+i+"?v="+z.string(g.md5),
w=N.inferFormat(i);w!=h.Data&&(i=L.removeFileExtension(i));d.add(i,e,g.bytes,w)}return d};N.inferFormat=function(a){a=L.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return h.GIF;case "jpg":case "jpeg":return h.JPG;case "jxr":case "wdp":return h.JXR;case "png":return h.PNG;case "webp":return h.WEBP;case "dds":return h.DDS;case "pvr":return h.PVR;case "pkm":return h.PKM;case "m4a":return h.M4A;case "mp3":return h.MP3;case "ogg":return h.OGG;case "opus":return h.OPUS;case "wav":return h.WAV}else null;
return h.Data};N.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=N.inferFormat(b));a=new Ab(a,b,d,c);this._entries.push(a);return a},iterator:function(){return p.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&N._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?L.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&dc.that(!D.startsWith(a,"http://")&&!D.startsWith(a,"https://"),
"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:N,__properties__:{get_remoteBase:"get_remoteBase",set_localBase:"set_localBase",get_localBase:"get_localBase"}};var C={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(","),Normal:["Normal",0]};C.Normal.toString=s;C.Normal.__enum__=C;C.Add=["Add",1];C.Add.toString=s;C.Add.__enum__=C;C.Multiply=["Multiply",2];
C.Multiply.toString=s;C.Multiply.__enum__=C;C.Screen=["Screen",3];C.Screen.toString=s;C.Screen.__enum__=C;C.Mask=["Mask",4];C.Mask.toString=s;C.Mask.__enum__=C;C.Copy=["Copy",5];C.Copy.toString=s;C.Copy.__enum__=C;var ba={__ename__:!0,__constructs__:["Gravity","Radial"],Gravity:["Gravity",0]};ba.Gravity.toString=s;ba.Gravity.__enum__=ba;ba.Radial=["Radial",1];ba.Radial.toString=s;ba.Radial.__enum__=ba;var r=function(a,b){this._file=a.getFile(b+".pex");for(var c=k.parse(this._file.toString()),d=0,
f=0,g=b.lastIndexOf("/"),g=0<=g?p.substr(b,0,g+1):"",c=c.firstElement().elements();c.hasNext();){var i=c.next();switch(i.get_nodeName().toLowerCase()){case "texture":this.texture=a.getTexture(g+L.removeFileExtension(i.get("name")));break;case "angle":this.angle=r.getFloat(i,"value");break;case "anglevariance":this.angleVariance=r.getFloat(i,"value");break;case "blendfuncdestination":f=z["int"](r.getFloat(i,"value"));break;case "blendfuncsource":d=z["int"](r.getFloat(i,"value"));break;case "duration":this.duration=
r.getFloat(i,"value");break;case "emittertype":this.type=0==z["int"](r.getFloat(i,"value"))?ba.Gravity:ba.Radial;break;case "finishcolor":this.alphaEnd=r.getFloat(i,"alpha");break;case "finishcolorvariance":this.alphaEndVariance=r.getFloat(i,"alpha");break;case "finishparticlesize":this.sizeEnd=r.getFloat(i,"value");break;case "finishparticlesizevariance":this.sizeEndVariance=r.getFloat(i,"value");break;case "gravity":this.gravityX=r.getFloat(i,"x");this.gravityY=r.getFloat(i,"y");break;case "maxparticles":this.maxParticles=
z["int"](r.getFloat(i,"value"));break;case "maxradius":this.maxRadius=r.getFloat(i,"value");break;case "maxradiusvariance":this.maxRadiusVariance=r.getFloat(i,"value");break;case "minradius":this.minRadius=r.getFloat(i,"value");break;case "particlelifespan":this.lifespan=r.getFloat(i,"value");break;case "particlelifespanvariance":this.lifespanVariance=r.getFloat(i,"value");break;case "radialaccelvariance":this.radialAccelVariance=r.getFloat(i,"value");break;case "radialacceleration":this.radialAccel=
r.getFloat(i,"value");break;case "rotatepersecond":this.rotatePerSecond=r.getFloat(i,"value");break;case "rotatepersecondvariance":this.rotatePerSecondVariance=r.getFloat(i,"value");break;case "rotationend":this.rotationEnd=r.getFloat(i,"value");break;case "rotationendvariance":this.rotationEndVariance=r.getFloat(i,"value");break;case "rotationstart":this.rotationStart=r.getFloat(i,"value");break;case "rotationstartvariance":this.rotationStartVariance=r.getFloat(i,"value");break;case "sourcepositionvariance":this.emitXVariance=
r.getFloat(i,"x");this.emitYVariance=r.getFloat(i,"y");break;case "speed":this.speed=r.getFloat(i,"value");break;case "speedvariance":this.speedVariance=r.getFloat(i,"value");break;case "startcolor":this.alphaStart=r.getFloat(i,"alpha");break;case "startcolorvariance":this.alphaStartVariance=r.getFloat(i,"alpha");break;case "startparticlesize":this.sizeStart=r.getFloat(i,"value");break;case "startparticlesizevariance":this.sizeStartVariance=r.getFloat(i,"value");break;case "tangentialaccelvariance":this.tangentialAccelVariance=
r.getFloat(i,"value");break;case "tangentialacceleration":this.tangentialAccel=r.getFloat(i,"value")}}0>=this.lifespan&&(this.lifespan=this.duration);1==d&&1==f?this.blendMode=C.Add:1==d&&771==f?this.blendMode=null:(0!=d||0!=f)&&null};r.__name__=!0;r.getFloat=function(a,b){return z.parseFloat(a.get(b))};r.prototype={createEmitter:function(){return new E(this)},__class__:r};var Bb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};Bb.__name__=!0;Bb.prototype={__class__:Bb};var q=function(){this.blendMode=
this.scissor=null;var a=this;t.call(this);this._flags|=54;this._localMatrix=new Cb;var b=function(){a._flags|=24};this.x=new n(0,b);this.y=new n(0,b);this.rotation=new n(0,b);this.scaleX=new n(1,b);this.scaleY=new n(1,b);this.anchorX=new n(0,b);this.anchorY=new n(0,b);this.alpha=new n(1)};q.__name__=!0;q.hitTest=function(a,b,c){var d=a._compMap.Sprite_4;if(null!=d){if(6!=(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,q._scratchPoint)&&(b=q._scratchPoint.x,c=q._scratchPoint.y);var f=
d.scissor;if(null!=f&&!f.contains(b,c))return null}a=q.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};q.render=function(a,b){var c=a._compMap.Sprite_4;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),f=d.m02,g=d.m12;0!=(c._flags&32)&&(f=Math.round(f),g=Math.round(g));b.transform(d.m00,d.m10,d.m01,d.m11,f,g);d=c.scissor;null!=d&&b.applyScissor(d.x,
d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_8;if(null!=d){d=d.occludedScenes;for(f=0;f<d.length;)g=d[f],++f,q.render(g,b)}for(d=a.firstChild;null!=d;)f=d.next,q.render(d,b),d=f;null!=c&&b.restore()};q.hitTestBackwards=function(a,b,c){if(null!=a){var d=q.hitTestBackwards(a.next,b,c);return null!=d?d:q.hitTest(a,b,c)}return null};q.__super__=t;q.prototype=v(t.prototype,{get_name:function(){return"Sprite_4"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,
b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,
b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setRotation:function(a){this.rotation.set__(a);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),
this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_4;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new A);return this._pointerDown},
get_pointerMove:function(){null==this._pointerMove&&(this._pointerMove=new A);return this._pointerMove},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new A);return this._pointerUp},get_pointerIn:function(){null==this._pointerIn&&(this._pointerIn=new A);return this._pointerIn},get_pointerOut:function(){null==this._pointerOut&&(this._pointerOut=new A);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=j._platform.getPointer().move.connect(function(b){for(var c=
b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=Db.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=Db.set(this._flags,4,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},
onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:q,__properties__:v(t.prototype.__properties__,
{set_pointerEnabled:"set_pointerEnabled",set_visible:"set_visible",get_pointerOut:"get_pointerOut",get_pointerIn:"get_pointerIn",get_pointerUp:"get_pointerUp",get_pointerMove:"get_pointerMove",get_pointerDown:"get_pointerDown"})});var E=function(a){this._emitElapsed=this._totalElapsed=0;this.enabled=!0;this.numParticles=0;q.call(this);this.texture=a.texture;this.blendMode=a.blendMode;this.type=a.type;this.alphaEnd=new n(a.alphaEnd);this.alphaEndVariance=new n(a.alphaEndVariance);this.alphaStart=new n(a.alphaStart);
this.alphaStartVariance=new n(a.alphaStartVariance);this.angle=new n(a.angle);this.angleVariance=new n(a.angleVariance);this.duration=a.duration;this.emitXVariance=new n(a.emitXVariance);this.emitYVariance=new n(a.emitYVariance);this.gravityX=new n(a.gravityX);this.gravityY=new n(a.gravityY);this.maxRadius=new n(a.maxRadius);this.maxRadiusVariance=new n(a.maxRadiusVariance);this.minRadius=new n(a.minRadius);this.lifespan=new n(a.lifespan);this.lifespanVariance=new n(a.lifespanVariance);this.radialAccel=
new n(a.radialAccel);this.radialAccelVariance=new n(a.radialAccelVariance);this.rotatePerSecond=new n(a.rotatePerSecond);this.rotatePerSecondVariance=new n(a.rotatePerSecondVariance);this.rotationEnd=new n(a.rotationEnd);this.rotationEndVariance=new n(a.rotationEndVariance);this.rotationStart=new n(a.rotationStart);this.rotationStartVariance=new n(a.rotationStartVariance);this.sizeEnd=new n(a.sizeEnd);this.sizeEndVariance=new n(a.sizeEndVariance);this.sizeStart=new n(a.sizeStart);this.sizeStartVariance=
new n(a.sizeStartVariance);this.speed=new n(a.speed);this.speedVariance=new n(a.speedVariance);this.tangentialAccel=new n(a.tangentialAccel);this.tangentialAccelVariance=new n(a.tangentialAccelVariance);this.emitX=new n(0);this.emitY=new n(0);this._particles=Array(a.maxParticles);for(var a=0,b=this._particles.length;a<b;)this._particles[a]=new Eb,++a};E.__name__=!0;E.random=function(a,b){0!=b&&(a+=b*(2*Math.random()-1));return a};E.__super__=q;E.prototype=v(q.prototype,{onUpdate:function(a){q.prototype.onUpdate.call(this,
a);this.alphaEnd.update(a);this.alphaEndVariance.update(a);this.alphaStart.update(a);this.alphaStartVariance.update(a);this.angle.update(a);this.angleVariance.update(a);this.emitX.update(a);this.emitXVariance.update(a);this.emitY.update(a);this.emitYVariance.update(a);this.gravityX.update(a);this.gravityY.update(a);this.lifespan.update(a);this.lifespanVariance.update(a);this.maxRadius.update(a);this.maxRadiusVariance.update(a);this.minRadius.update(a);this.radialAccel.update(a);this.radialAccelVariance.update(a);
this.rotatePerSecond.update(a);this.rotatePerSecondVariance.update(a);this.rotationEnd.update(a);this.rotationEndVariance.update(a);this.rotationStart.update(a);this.rotationStartVariance.update(a);this.sizeEnd.update(a);this.sizeEndVariance.update(a);this.sizeStart.update(a);this.sizeStartVariance.update(a);this.speed.update(a);this.speedVariance.update(a);this.tangentialAccel.update(a);this.tangentialAccelVariance.update(a);for(var b=this.type==ba.Gravity,c=0;c<this.numParticles;){var d=this._particles[c];
if(d.life>a){if(b){d.x+=d.velX*a;d.y+=d.velY*a;var f=this.gravityX._value,g=-this.gravityY._value;if(0!=d.radialAccel||0!=d.tangentialAccel)var i=d.x-d.emitX,e=d.y-d.emitY,w=Math.sqrt(i*i+e*e),i=i/w,e=e/w,f=f+i*d.radialAccel,g=g+e*d.radialAccel,w=i,f=f+-e*d.tangentialAccel,g=g+w*d.tangentialAccel;d.velX+=f*a;d.velY+=g*a}else d.radialRotation+=d.velRadialRotation*a,d.radialRadius+=d.velRadialRadius*a,f=d.radialRadius,d.x=this.emitX._value-Math.cos(d.radialRotation)*f,d.y=this.emitY._value-Math.sin(d.radialRotation)*
f,f<this.minRadius._value&&(d.life=0);d.scale+=d.velScale*a;d.rotation+=d.velRotation*a;d.alpha+=d.velAlpha*a;d.life-=a;++c}else--this.numParticles,c!=this.numParticles&&(this._particles[c]=this._particles[this.numParticles],this._particles[this.numParticles]=d)}if(this.enabled){if(0<this.duration&&(this._totalElapsed+=a,this._totalElapsed>=this.duration)){this.enabled=!1;return}b=this.lifespan._value/this._particles.length;for(this._emitElapsed+=a;this._emitElapsed>=b;)this.numParticles<this._particles.length&&
this.initParticle(this._particles[this.numParticles])&&++this.numParticles,this._emitElapsed-=b}},draw:function(a){for(var b=-this.texture.get_width()/2,c=0,d=this.numParticles;c<d;){var f=this._particles[c];a.save();a.translate(f.x,f.y);1>f.alpha&&a.multiplyAlpha(f.alpha);0!=f.rotation&&a.rotate(f.rotation);1!=f.scale&&a.scale(f.scale,f.scale);a.drawTexture(this.texture,b,b);a.restore();++c}},initParticle:function(a){a.life=E.random(this.lifespan._value,this.lifespanVariance._value);if(0>=a.life)return!1;
a.emitX=this.emitX._value;a.emitY=this.emitY._value;var b=-V.toRadians(E.random(this.angle._value,this.angleVariance._value)),c=E.random(this.speed._value,this.speedVariance._value);a.velX=c*Math.cos(b);a.velY=c*Math.sin(b);a.radialAccel=E.random(this.radialAccel._value,this.radialAccelVariance._value);a.tangentialAccel=E.random(this.tangentialAccel._value,this.tangentialAccelVariance._value);a.radialRadius=E.random(this.maxRadius._value,this.maxRadiusVariance._value);a.velRadialRadius=-a.radialRadius/
a.life;a.radialRotation=b;a.velRadialRotation=V.toRadians(E.random(this.rotatePerSecond._value,this.rotatePerSecondVariance._value));this.type==ba.Gravity?(a.x=E.random(this.emitX._value,this.emitXVariance._value),a.y=E.random(this.emitY._value,this.emitYVariance._value)):(b=a.radialRadius,a.x=this.emitX._value-Math.cos(a.radialRotation)*b,a.y=this.emitY._value-Math.sin(a.radialRotation)*b);c=this.texture.get_width();b=E.random(this.sizeStart._value,this.sizeStartVariance._value)/c;c=E.random(this.sizeEnd._value,
this.sizeEndVariance._value)/c;a.scale=b;a.velScale=(c-b)/a.life;b=E.random(this.rotationStart._value,this.rotationStartVariance._value);c=E.random(this.rotationEnd._value,this.rotationEndVariance._value);a.rotation=b;a.velRotation=(c-b)/a.life;b=E.random(this.alphaStart._value,this.alphaStartVariance._value);c=E.random(this.alphaEnd._value,this.alphaEndVariance._value);a.alpha=b;a.velAlpha=(c-b)/a.life;return!0},__class__:E});var Eb=function(){this.emitX=this.emitY=this.x=this.velX=this.y=this.velY=
this.radialRadius=this.velRadialRadius=this.radialRotation=this.velRadialRotation=this.radialAccel=this.tangentialAccel=this.scale=this.velScale=this.rotation=this.velRotation=this.alpha=this.velAlpha=this.life=0};Eb.__name__=!0;Eb.prototype={__class__:Eb};var ab=function(a,b,c){q.call(this);this.color=a;this.width=new n(b);this.height=new n(c)};ab.__name__=!0;ab.__super__=q;ab.prototype=v(q.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},
getNaturalHeight:function(){return this.height._value},setSize:function(a,b){this.width.set__(a);this.height.set__(b);return this},onUpdate:function(a){q.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:ab});var bb=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};bb.__name__=!0;bb.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,
c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?z["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new ea);this._kernings.set(a,b)},__class__:bb};var na=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};na.__name__=!0;na.prototype={layoutText:function(a,b,c,d,f){null==f&&(f=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=Q.Left);return new oa(this,a,b,c,d,f)},reload:function(){this._glyphs=
new ea;this._glyphs.set(na.NEWLINE.charCode,na.NEWLINE);for(var a=new wa(this._file.toString()),b=new ea,c=this.name.lastIndexOf("/"),c=0<=c?p.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var f=a.pairs();f.hasNext();){var g=f.next();switch(g.key){case "size":this.size=g.getInt()}}break;case "common":for(f=a.pairs();f.hasNext();)switch(g=f.next(),g.key){case "lineHeight":this.lineHeight=g.getInt()}break;case "page":for(var f=0,g=null,e=a.pairs();e.hasNext();){var l=
e.next();switch(l.key){case "id":f=l.getInt();break;case "file":g=l.getString()}}g=this._pack.getTexture(c+L.removeFileExtension(g));b.set(f,g);break;case "char":f=null;for(g=a.pairs();g.hasNext();)switch(e=g.next(),e.key){case "id":f=new bb(e.getInt());break;case "x":f.x=e.getInt();break;case "y":f.y=e.getInt();break;case "width":f.width=e.getInt();break;case "height":f.height=e.getInt();break;case "page":e=e.getInt();f.page=b.get(e);break;case "xoffset":f.xOffset=e.getInt();break;case "yoffset":f.yOffset=
e.getInt();break;case "xadvance":f.xAdvance=e.getInt()}this._glyphs.set(f.charCode,f);break;case "kerning":f=null;e=g=0;for(l=a.pairs();l.hasNext();){var w=l.next();switch(w.key){case "first":f=this._glyphs.get(w.getInt());break;case "second":g=w.getInt();break;case "amount":e=w.getInt()}}null!=f&&0!=e&&f.setKerning(g,e)}},__class__:na};var Q={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};Q.Left.toString=s;Q.Left.__enum__=Q;Q.Center=["Center",1];Q.Center.toString=s;Q.Center.__enum__=
Q;Q.Right=["Right",2];Q.Right.toString=s;Q.Right.__enum__=Q;var oa=function(a,b,c,d,f,g){this.lines=0;var e=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+g);this.bounds=new Ea;for(var l=[],g=b.length,w=0;w<g;){var h=w++,h=b.charCodeAt(h),h=a._glyphs.get(h);null!=h?this._glyphs.push(h):null}for(var b=-1,m=0,j=0,a=a._glyphs.get(10),g=function(){e.bounds.width=V.max(e.bounds.width,m);e.bounds.height+=j;l[e.lines]=m;j=m=0;++e.lines},w=0;w<this._glyphs.length;){h=
this._glyphs[w];this._offsets[w]=Math.round(m);var k=0<d&&m+h.width>d;k||h==a?(k&&(0<=b?(this._glyphs[b]=a,m=this._offsets[b],w=b):this._glyphs.splice(w,0,a)),b=-1,j=this._lineOffset,g()):(32==h.charCode&&(b=w),m+=h.xAdvance+f,j=V.max(j,h.height+h.yOffset),w+1<this._glyphs.length&&(m+=h.getKerning(this._glyphs[w+1].charCode)));++w}g();f=0;a=oa.getAlignOffset(c,l[0],d);b=1.79769313486231E308;g=-1.79769313486231E308;h=w=0;for(k=this._glyphs.length;h<k;){var n=this._glyphs[h];10==n.charCode&&(f+=this._lineOffset,
++w,a=oa.getAlignOffset(c,l[w],d));this._offsets[h]+=a;var o=f+n.yOffset;b<o||(b=o);g=V.max(g,o+n.height);++h}this.bounds.x=oa.getAlignOffset(c,this.bounds.width,d);this.bounds.y=b;this.bounds.height=g-b};oa.__name__=!0;oa.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};oa.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var f=this._glyphs[c];10==f.charCode?b+=this._lineOffset:f.draw(a,this._offsets[c],b);++c}},
__class__:oa};var wa=function(a){this._configText=a;this._keywordPattern=new U("([A-Za-z]+)(.*)","");this._pairPattern=new U('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};wa.__name__=!0;wa.advance=function(a,b){var c=b.matchedPos();return p.substr(a,c.pos+c.len,a.length)};wa.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=wa.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},
pairs:function(){var a=this,b=this._pairText;return{next:function(){b=wa.advance(b,a._pairPattern);return new Fb(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:wa};var Fb=function(a,b){this.key=a;this._value=b};Fb.__name__=!0;Fb.prototype={getInt:function(){return z.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:p.substr(this._value,1,this._value.length-2)},__class__:Fb};var Gb=function(){};
Gb.__name__=!0;Gb.prototype={__class__:Gb};var Fa=function(a){q.call(this);this.texture=a};Fa.__name__=!0;Fa.__super__=q;Fa.prototype=v(q.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:Fa});var Y={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};Y.Portrait.toString=
s;Y.Portrait.__enum__=Y;Y.Landscape=["Landscape",1];Y.Landscape.toString=s;Y.Landscape.__enum__=Y;var cb=function(a,b,c){null==c&&(c=-1);null==b&&(b=-1);q.call(this);this.texture=a;0>b&&(b=null!=a?a.get_width():0);this.width=new n(b);0>c&&(c=null!=a?a.get_height():0);this.height=new n(c)};cb.__name__=!0;cb.__super__=q;cb.prototype=v(q.prototype,{draw:function(a){null!=this.texture&&a.drawPattern(this.texture,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},
getNaturalHeight:function(){return this.height._value},onUpdate:function(a){q.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:cb});var db=function(){};db.__name__=!0;db.__interfaces__=[ma];db.prototype={__class__:db};var ec=function(){};ec.__name__=!0;ec.__interfaces__=[db];var eb=function(a,b){null==b&&(b="");this._layout=null;var c=this;q.call(this);this._font=a;this._text=b;this._align=Q.Left;this._flags|=128;var d=function(){c._flags|=128};this.wrapWidth=
new n(0,d);this.letterSpacing=new n(0,d);this.lineSpacing=new n(0,d)};eb.__name__=!0;eb.__super__=q;eb.prototype=v(q.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,
b){this.updateLayout();return this._layout.bounds.contains(a,b)},setWrapWidth:function(a){this.wrapWidth.set__(a);return this},setAlign:function(a){this.set_align(a);return this},set_font:function(a){a!=this._font&&(this._font=a,this._flags|=128);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,
this.lineSpacing._value))},onUpdate:function(a){q.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:eb,__properties__:v(q.prototype.__properties__,{set_align:"set_align",set_font:"set_font"})});var M={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};M.Left.toString=s;M.Left.__enum__=M;M.Middle=["Middle",1];M.Middle.toString=s;M.Middle.__enum__=M;M.Right=["Right",2];M.Right.toString=s;M.Right.__enum__=
M;M.Unknown=function(a){a=["Unknown",3,a];a.__enum__=M;a.toString=s;return a};var R={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};R.Default.toString=s;R.Default.__enum__=R;R.Button=["Button",1];R.Button.toString=s;R.Button.__enum__=R;R.None=["None",2];R.None.toString=s;R.None.__enum__=R;var Hb=function(){this.init(0,0,0,null)};Hb.__name__=!0;Hb.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:Hb};var Ga={__ename__:!0,
__constructs__:["Mouse","Touch"]};Ga.Mouse=function(a){a=["Mouse",0,a];a.__enum__=Ga;a.toString=s;return a};Ga.Touch=function(a){a=["Touch",1,a];a.__enum__=Ga;a.toString=s;return a};var Ib=function(){this.init(0,0,0,null,null)};Ib.__name__=!0;Ib.prototype={init:function(a,b,c,d,f){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=f;this._stopped=!1},__class__:Ib};var Jb=function(a){this.id=a;this._source=Ga.Touch(this)};Jb.__name__=!0;Jb.prototype={init:function(a,b){this.viewX=a;this.viewY=
b},__class__:Jb};var V=function(){};V.__name__=!0;V.toRadians=function(a){return 3.141592653589793*a/180};V.max=function(a,b){return a>b?a:b};V.clamp=function(a,b,c){return a<b?b:a>c?c:a};var Cb=function(){this.identity()};Cb.__name__=!0;Cb.prototype={set:function(a,b,c,d,f,g){this.m00=a;this.m01=c;this.m02=f;this.m10=b;this.m11=d;this.m12=g},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,f){var g=Math.sin(f),f=Math.cos(f);this.set(f*c,g*c,-g*d,f*d,a,b)},translate:function(a,
b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},__class__:Cb};var Ea=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};Ea.__name__=!0;Ea.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=
c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},__class__:Ea};var P=function(){this._disposed=!1};P.__name__=!0;P.__interfaces__=[ma];P.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:P};var pa=function(a,b){var c=this;this.manifest=b;
this._platform=a;this.promise=new fb;this._bytesLoaded=new T;this._pack=new gb(b,this);var d=Ra.array(b);if(0==d.length)this.handleSuccess();else{for(var f=new T,g=0;g<d.length;){var e=d[g];++g;var l=f.get(e.name);null==l&&(l=[],f.set(e.name,l));l.push(e)}this._assetsRemaining=Ra.count(f);for(d=f.iterator();d.hasNext();)f=[d.next()],this.pickBestEntry(f[0],function(a){return function(d){if(null!=d){var f=b.getFullURL(d);try{c.loadEntry(f,d)}catch(g){c.handleError(d,"Unexpected error: "+z.string(g))}f=
c.promise;f.set_total(f._total+d.bytes)}else d=a[0][0],pa.isAudio(d.format)?c.handleLoad(d,W.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(f))}};pa.__name__=!0;pa.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};pa.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var f=c[d];++d;for(var g=0;g<a.length;){var e=a[g];++g;if(e.format==f){b(e);return}}}b(null)})},
loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=
0,d=this._bytesLoaded.iterator();d.hasNext();)var f=d.next(),c=c+f;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(L.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:pa};var gb=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new T;this.sounds=new T;this.files=new T};gb.__name__=
!0;gb.__interfaces__=[Za];gb.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw L.withFields("Missing texture",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw L.withFields("Missing sound",["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw L.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;
for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:gb};var Ha=function(a){this._disposed=!1;this._content=a};Ha.__name__=!0;Ha.__interfaces__=[$a];Ha.__super__=P;Ha.prototype=v(P.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Ha});
var Kb=function(){};Kb.__name__=!0;Kb.prototype={__class__:Kb};var S=function(a){this._pointer=a;this._source=Ga.Mouse(S._sharedEvent);this.down=new A;this.move=new A;this.up=new A;this.scroll=new A;this._y=this._x=0;this._cursor=R.Default;this._buttonStates=new ea};S.__name__=!0;S.__interfaces__=[Kb];S.prototype={set_cursor:function(a){return this._cursor=a},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,Lb.toButton(c)),this._pointer.submitDown(a,
b,this._source),this.down.emit(S._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(S._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,Lb.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(S._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=
a;this._y=b;S._sharedEvent.init(S._sharedEvent.id+1,a,b,c)},__class__:S,__properties__:{set_cursor:"set_cursor"}};var Mb=function(){};Mb.__name__=!0;Mb.prototype={__class__:Mb};var K=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new A;this.move=new A;this.up=new A;this._x=a;this._y=b;this._isDown=c};K.__name__=!0;K.__interfaces__=[Mb];K.prototype={get_x:function(){return this._x},get_y:function(){return this._y},isDown:function(){return this._isDown},submitDown:function(a,
b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],f=q.hitTest(j.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_4;null!=e&&d.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(K._sharedEvent),K._sharedEvent._stopped)return;this.down.emit(K._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],f=q.hitTest(j.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_4;null!=e&&
d.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(K._sharedEvent),K._sharedEvent._stopped)return;this.move.emit(K._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],f=q.hitTest(j.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_4;null!=e&&d.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(K._sharedEvent),K._sharedEvent._stopped)return;
this.up.emit(K._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;K._sharedEvent.init(K._sharedEvent.id+1,a,b,c,d)},__class__:K,__properties__:{get_y:"get_y",get_x:"get_x"}};var qa=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};qa.__name__=!0;qa.__interfaces__=[ec];qa.__super__=P;qa.prototype=v(P.prototype,{subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;c._y=b;c.rootX=
this.rootX+a;c.rootY=this.rootY+b;return c},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:qa,__properties__:{get_height:"get_height",get_width:"get_width"}});var fc=function(){};fc.__name__=!0;var Va=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new ea;this._points=[];this.down=new A;this.move=new A;this.up=new A};Va.__name__=!0;Va.__interfaces__=[fc];Va.prototype=
{submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Jb(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),p.remove(this._points,
d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:Va};var xa=function(){};xa.__name__=!0;xa.__interfaces__=[ma];xa.prototype={__class__:xa};var W=function(){this._disposed=!1;this._playback=new hb(this)};W.__name__=!0;W.__interfaces__=[xa];W.getInstance=function(){null==W._instance&&(W._instance=new W);return W._instance};W.__super__=P;W.prototype=v(P.prototype,{play:function(){return this._playback},loop:function(){return this._playback},
onDisposed:function(){},__class__:W});var ya=function(){};ya.__name__=!0;ya.__interfaces__=[aa];ya.prototype={__class__:ya};var hb=function(a){this._sound=a;this.volume=new n(0);this._complete=new O(!0)};hb.__name__=!0;hb.__interfaces__=[ya];hb.prototype={get_sound:function(){return this._sound},set_paused:function(){return!0},dispose:function(){},__class__:hb,__properties__:{get_sound:"get_sound",set_paused:"set_paused"}};var Wa=function(){this.down=new A;this.move=new A;this.up=new A};Wa.__name__=
!0;Wa.__interfaces__=[fc];Wa.prototype={__class__:Wa};var Ia=function(){this._entries=[]};Ia.__name__=!0;Ia.__interfaces__=[aa];Ia.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new Nb(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Ia};var Nb=
function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};Nb.__name__=!0;Nb.prototype={__class__:Nb};var ib=function(){};ib.__name__=!0;ib.__interfaces__=[Gb];ib.prototype={__class__:ib};var Ob=function(){};Ob.__name__=!0;Ob.prototype={__class__:Ob};var jb=function(){};jb.__name__=!0;jb.__interfaces__=[Ob];jb.prototype={__class__:jb};var ta=function(){this._tickables=[]};ta.__name__=!0;ta.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_10;if(null!=c&&(c._realDt=b,b*=c.scale._value,
0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,ta.updateEntity(c,b),c=d};ta.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}j.volume.update(a);ta.updateEntity(j.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),q.render(j.root,b),a.didRender())},
addTickable:function(a){this._tickables.push(a)},__class__:ta};var Lb=function(){};Lb.__name__=!0;Lb.toButton=function(a){switch(a){case 0:return M.Left;case 1:return M.Middle;case 2:return M.Right}return M.Unknown(a)};var Pb=function(){};Pb.__name__=!0;Pb.prototype={__class__:Pb};var kb=function(){};kb.__name__=!0;kb.prototype={__class__:kb};var lb=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};lb.__name__=!0;lb.__interfaces__=[ib];lb.prototype={save:function(){this._canvasCtx.save()},
translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},scale:function(a,b){this._canvasCtx.scale(a,b)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},transform:function(a,b,c,d,f,g){this._canvasCtx.transform(a,b,c,d,f,g)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,f,g,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",
this.drawSubTexture(a,b,c,d,f,g,e),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+f|0,g|0,e|0,b|0,c|0,g|0,e|0)},drawPattern:function(a,b,c,d,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,f),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=a.getPattern(),this._canvasCtx.fillRect(b|0,c|0,d|0,f|0))},fillRect:function(a,b,c,d,f){if(this._firstDraw)this._firstDraw=
!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,f),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+z.string(a);this._canvasCtx.fillStyle="#"+z.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,f|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";
break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},__class__:lb};var ua=function(a){this.graphics=new lb(a,!1);this._hasGPU=new O(!0)};ua.__name__=!0;ua.__interfaces__=[jb];ua.prototype={get_type:function(){return Z.Canvas},createTextureFromImage:function(a){a=new Ja(ua.CANVAS_TEXTURES?o.createCanvas(a):
a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:ua,__properties__:{get_type:"get_type"}};var mb=function(a,b,c){this._rootUpdateCount=0;this._pattern=null;qa.call(this,a,b,c)};mb.__name__=!0;mb.__super__=qa;mb.prototype=v(qa.prototype,{getPattern:function(){if(this._rootUpdateCount!=this.root.updateCount||
null==this._pattern)this._rootUpdateCount=this.root.updateCount,this._pattern=this.root.createPattern(this.rootX,this.rootY,this._width,this._height);return this._pattern},__class__:mb});var Ja=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};Ja.__name__=!0;Ja.__interfaces__=[Pb];Ja.__super__=P;Ja.prototype=v(P.prototype,{createTexture:function(a,b){return new mb(this,a,b)},createPattern:function(a,b,c,d){var f=this.getContext2d(),
e=this.image;if(0!=a||0!=b||c!=this.width||d!=this.height)e=o.createEmptyCanvas(c,d),c=e.getContext("2d"),c.globalCompositeOperation="copy",c.drawImage(this.image,-a,-b);return f.createPattern(e,"repeat")},getContext2d:function(){F.__instanceof(this.image,HTMLCanvasElement)||(this.image=o.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:Ja});var y=function(a,b){pa.call(this,a,b)};y.__name__=!0;y.detectImageFormats=function(a){var b=
[h.PNG,h.JPG,h.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(h.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var f;f=window.document.createElement("img");f.onload=f.onerror=function(){1==f.width&&b.unshift(h.JXR);--c;0==c&&a(b)};f.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
y.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==$(a,a.canPlayType))return[];var b=new U("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!x.get_supported()&&b.match(c))return[];for(var b=[{format:h.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:h.MP3,mimeType:"audio/mpeg"},{format:h.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:h.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:h.WAV,mimeType:"audio/wav"}],c=[],
d=0;d<b.length;){var f=b[d];++d;var e="";try{e=a.canPlayType(f.mimeType)}catch(i){}""!=e&&c.push(f.format)}return c};y.supportsBlob=function(){if(y._detectBlobSupport){y._detectBlobSupport=!1;if((new U("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;y._URL=o.loadExtension("URL").value}return null!=y._URL&&null!=y._URL.createObjectURL};
y.__super__=pa;y.prototype=v(pa.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var f=new Ia;f.addDisposingListener(d,"load",function(){y.supportsBlob()&&y._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});f.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});y.supportsBlob()?this.download(a,
b,"blob",function(a){d.src=y._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(x.get_supported())this.download(a,b,"arraybuffer",function(a){x.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new x(a))},function(){c.handleLoad(b,W.getInstance())})});else{var e;e=window.document.createElement("audio");
e.preload="auto";var i=++y._mediaRefCount;null==y._mediaElements&&(y._mediaElements=new ea);y._mediaElements.set(i,e);f=new Ia;f.addDisposingListener(e,"canplaythrough",function(){y._mediaElements.remove(i);c.handleLoad(b,new Ka(e))});f.addDisposingListener(e,"error",function(){y._mediaElements.remove(i);var a=e.error.code;3==a||4==a?c.handleLoad(b,W.getInstance()):c.handleError(b,"Failed to load audio: "+e.error.code)});f.addListener(e,"progress",function(){if(0<e.buffered.length&&0<e.duration){var a=
e.buffered.end(0)/e.duration;c.handleProgress(b,a*b.bytes|0)}});e.src=a;e.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new Ha(a))})}},getAssetFormats:function(a){var b=this;null==y._supportedFormats&&(y._supportedFormats=new fb,y.detectImageFormats(function(a){y._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(y.detectAudioFormats()).concat([h.Data]))}));y._supportedFormats.get(a)},download:function(a,b,c,d){var f=this,
e=null,i=null,l=0,h=!1,j=function(){h&&(h=!1,window.clearInterval(l))},m=3,k=function(){--m;return 0<=m?(i(),!0):!1},i=function(){j();null!=e&&e.abort();e=new XMLHttpRequest;e.open("GET",a,!0);e.responseType=c;var i=0;e.onprogress=function(a){h||(h=!0,l=window.setInterval(function(){4!=e.readyState&&5E3<Date.now()-i&&!k()&&(j(),f.handleError(b,"Download stalled"))},1E3));i=Date.now();f.handleProgress(b,a.loaded)};e.onerror=function(){if(0!=e.status||!k())j(),f.handleError(b,"HTTP error "+e.status)};
e.onload=function(){var a=e.response;null==a&&(a=e.responseText);j();d(a)};e.send()};i()},__class__:y});var Qb=function(){};Qb.__name__=!0;Qb.prototype={__class__:Qb};var Ya=function(){};Ya.__name__=!0;Ya.__interfaces__=[Qb];Ya.prototype={call:function(a,b){null==b&&(b=[]);for(var c=window,d=c,f=0,e=a.split(".");f<e.length;){var i=e[f];++f;c=d;d=J.field(c,i)}return d.apply(c,b)},__class__:Ya};var Ua=function(a,b){S.call(this,a);this._canvas=b};Ua.__name__=!0;Ua.__super__=S;Ua.prototype=v(S.prototype,
{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return S.prototype.set_cursor.call(this,a)},__class__:Ua});var Ka=function(a){this._disposed=!1;this.audioElement=a};Ka.__name__=!0;Ka.__interfaces__=[xa];Ka.__super__=P;Ka.prototype=v(P.prototype,{play:function(a){null==a&&(a=1);return new La(this,a,!1)},loop:function(a){null==a&&(a=1);return new La(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:Ka});
var La=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new n(b,function(){d.updateVolume()});this.updateVolume();this._complete=new O(!1);this.playAudio();j.hidden._value&&this.set_paused(!0)};La.__name__=!0;La.__interfaces__=[kb,ya];La.prototype={get_sound:function(){return this._sound},set_paused:function(a){this._clonedElement.paused!=a&&(a?
this._clonedElement.pause():this.playAudio());return a},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(ga.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=
j.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=j.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=j.volume._value*this.volume._value},__class__:La,__properties__:{get_sound:"get_sound",set_paused:"set_paused"}};var Rb=function(){};Rb.__name__=!0;Rb.prototype={__class__:Rb};var sa=function(a){var b=this;this._canvas=a;this.resize=new ha;
this.scaleFactor=sa.computeScaleFactor();1!=this.scaleFactor&&(o.setVendorStyle(this._canvas,"transform-origin","top left"),o.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));o.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){o.callLater($(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",$(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new O(null);null!=window.orientation&&
(window.addEventListener("orientationchange",$(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new O(!1);o.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};sa.__name__=!0;sa.__interfaces__=[Rb];sa.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=o.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);
a/=b;b=window.screen.height;return 2136<a*window.screen.width||2136<a*b?1:a};sa.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},lockOrientation:function(a){var b=o.loadExtension("lockOrientation",window.screen).value;if(null!=b){var c;switch(a[1]){case 0:c="portrait";break;case 1:c="landscape"}b.apply(window.screen,[c])||null}},requestFullscreen:function(a){null==a&&(a=!0);if(a){var a=window.document.documentElement,b=o.loadFirstExtension(["requestFullscreen",
"requestFullScreen"],a).value;null!=b&&b.apply(a,[])}else a=o.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],window.document).value,null!=a&&J.callMethod(window.document,a,[])},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();
return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";o.callLater(function(){o.hideMobileBrowser();o.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(o.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==o.loadFirstExtension(["fullscreen","fullScreen",
"isFullScreen"],window.document).value)},__class__:sa,__properties__:{get_height:"get_height",get_width:"get_width"}};var o=function(){};o.__name__=!0;o.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};o.hideMobileBrowser=function(){window.scrollTo(1,0)};o.loadExtension=function(a,b){null==b&&(b=window);var c=J.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+p.substr(a,1,null),d=0,f=o.VENDOR_PREFIXES;d<f.length;){var e=f[d];++d;var i=e+c,l=
J.field(b,i);if(null!=l)return{prefix:e,field:i,value:l}}return{prefix:null,field:null,value:null}};o.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=o.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};o.polyfill=function(a,b){null==b&&(b=window);var c=o.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};o.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,f=o.VENDOR_PREFIXES;d<f.length;){var e=f[d];++d;a.setProperty("-"+
e+"-"+b,c)}a.setProperty(b,c)};o.addVendorListener=function(a,b,c,d){for(var f=0,e=o.VENDOR_PREFIXES;f<e.length;){var i=e[f];++f;a.addEventListener(i+b,c,d)}a.addEventListener(b,c,d)};o.orientation=function(a){switch(a){case -90:case 90:return Y.Landscape;default:return Y.Portrait}};o.createEmptyCanvas=function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};o.createCanvas=function(a){var b=o.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation=
"copy";c.drawImage(a,0,0);c.restore();return b};o.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var Sb=function(){};Sb.__name__=!0;Sb.prototype={__class__:Sb};var Xa=function(a){this._container=a};Xa.__name__=!0;Xa.__interfaces__=[Sb];Xa.prototype={openBrowser:function(a){window.open(a,"_blank")},__class__:Xa};var x=function(a){this._disposed=!1;
this.buffer=a};x.__name__=!0;x.__interfaces__=[xa];x.__properties__={get_supported:"get_supported"};x.get_supported=function(){if(x._detectSupport){x._detectSupport=!1;var a=o.loadExtension("AudioContext").value;null!=a&&(x.ctx=new a,x.gain=x.createGain(),x.gain.connect(x.ctx.destination),j.volume.watch(function(a){x.gain.gain.value=a}))}return null!=x.ctx};x.createGain=function(){return null!=x.ctx.createGain?x.ctx.createGain():x.ctx.createGainNode()};x.start=function(a,b){null!=a.start?a.start(b):
a.noteOn(b)};x.__super__=P;x.prototype=v(P.prototype,{play:function(a){null==a&&(a=1);return new Ma(this,a,!1)},loop:function(a){null==a&&(a=1);return new Ma(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:x,__properties__:{get_duration:"get_duration"}});var Ma=function(a,b,c){var d=this;this._sound=a;this._head=x.gain;this._complete=new O(!1);this._sourceNode=x.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=
c;this._sourceNode.onended=function(){d._complete.set__(!0)};x.start(this._sourceNode,0);this.playAudio();this.volume=new n(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);j.hidden._value&&this.set_paused(!0)};Ma.__name__=!0;Ma.__interfaces__=[kb,ya];Ma.prototype={get_sound:function(){return this._sound},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_position:function(){return this._complete._value?
this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(x.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=x.createGain(),this.insertNode(this._gainNode));
this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=x.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(ga.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=j.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},
__class__:Ma,__properties__:{get_position:"get_position",get_sound:"get_sound",set_paused:"set_paused"}};var nb=function(){this._width=this._height=-1;this._transitor=null;t.call(this);this.scenes=[];this.occludedScenes=[];this._root=new I};nb.__name__=!0;nb.__super__=t;nb.prototype=v(t.prototype,{get_name:function(){return"Director_8"},setSize:function(a,b){this._width=a;this._height=b;return this},pushScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,
a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},unwindToScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<
b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);p.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_9;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);
a.dispose()},show:function(a){a=a._compMap.Scene_9;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_9;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,
c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new Tb(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},__class__:nb,__properties__:v(t.prototype.__properties__,{get_topScene:"get_topScene"})});var Tb=function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};Tb.__name__=!0;Tb.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();
this._onComplete()},__class__:Tb};var Na=function(){};Na.__name__=!0;Na.prototype={init:function(a,b,c){this._director=a;this._from=b;this._to=c},update:function(){return!0},complete:function(){},__class__:Na};var ia=function(a,b){this._duration=a;this._ease=null!=b?b:G.linear};ia.__name__=!0;ia.__super__=Na;ia.prototype=v(Na.prototype,{init:function(a,b,c){Na.prototype.init.call(this,a,b,c);this._elapsed=0},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},interp:function(a,
b){return a+(b-a)*this._ease(this._elapsed/this._duration)},__class__:ia});var ob=function(a,b){ia.call(this,a,b)};ob.__name__=!0;ob.__super__=ia;ob.prototype=v(ia.prototype,{init:function(a,b,c){ia.prototype.init.call(this,a,b,c);a=this._to._compMap.Sprite_4;null==a&&this._to.add(a=new q);a.alpha.set__(0)},update:function(a){a=ia.prototype.update.call(this,a);this._to._compMap.Sprite_4.alpha.set__(this.interp(0,1));return a},complete:function(){this._to._compMap.Sprite_4.alpha.set__(1)},__class__:ob});
var Oa=function(a){null==a&&(a=!0);t.call(this);this.opaque=a;this.shown=new ha;this.hidden=new ha};Oa.__name__=!0;Oa.__super__=t;Oa.prototype=v(t.prototype,{get_name:function(){return"Scene_9"},__class__:Oa});var ja=function(){};ja.__name__=!0;ja.prototype={__class__:ja};var pb=function(a,b,c,d){this._value=a;this._to=b;this._seconds=c;this._easing=d};pb.__name__=!0;pb.__interfaces__=[ja];pb.prototype={update:function(a){null==this._tween&&(this._tween=new Da(this._value._value,this._to,this._seconds,
this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},__class__:pb};var ka=function(a){this._fn=a};ka.__name__=!0;ka.__interfaces__=[ja];ka.prototype={update:function(){this._fn();return 0},__class__:ka};var la=function(a){this._duration=a;this._elapsed=0};la.__name__=!0;la.__interfaces__=[ja];la.prototype={update:function(a){this._elapsed+=a;
if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},__class__:la};var qb=function(a){this._completedActions=[];this._runningActions=null!=a?a.slice():[]};qb.__name__=!0;qb.__interfaces__=[ja];qb.prototype={update:function(a,b){for(var c=!0,d=0,f=0,e=this._runningActions.length;f<e;){var i=f++,l=this._runningActions[i];if(null!=l){var h=l.update(a,b);0<=h?(this._runningActions[i]=null,this._completedActions.push(l),h>d&&(d=h)):c=!1}}return c?(this._runningActions=
this._completedActions,this._completedActions=[],d):-1},__class__:qb};var rb=function(a,b){null==b&&(b=-1);this._action=a;this._remaining=this._count=b};rb.__name__=!0;rb.__interfaces__=[ja];rb.prototype={update:function(a,b){if(0==this._count)return 0;var c=this._action.update(a,b);return 0<this._count&&0<=c&&0==--this._remaining?(this._remaining=this._count,c):-1},__class__:rb};var ra=function(){t.call(this);this.stopAll()};ra.__name__=!0;ra.__super__=t;ra.prototype=v(t.prototype,{get_name:function(){return"Script_7"},
run:function(a){a=new sb(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:ra});var sb=function(a){this.removed=!1;this.action=a};sb.__name__=!0;sb.__interfaces__=[aa];sb.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:sb};var za=function(a){this._idx=0;this._runningActions=null!=a?a.slice():
[]};za.__name__=!0;za.__interfaces__=[ja];za.prototype={add:function(a){this._runningActions.push(a)},update:function(a,b){for(var c=0;;){var d=this._runningActions[this._idx];if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:za};var Z={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};Z.Stage3D.toString=s;Z.Stage3D.__enum__=Z;Z.WebGL=["WebGL",1];Z.WebGL.toString=
s;Z.WebGL.__enum__=Z;Z.Canvas=["Canvas",2];Z.Canvas.toString=s;Z.Canvas.__enum__=Z;var dc=function(){};dc.__name__=!0;dc.that=function(){};var Db=function(){};Db.__name__=!0;Db.set=function(a,b,c){return c?a|b:a&~b};var Pa=function(){this.mainSection=new T;this.sections=new T};Pa.__name__=!0;Pa.parse=function(a){for(var b=new Pa,c=new U("^\\s*;",""),d=new U("^\\s*\\[\\s*([^\\]]*)\\s*\\]",""),f=new U("^\\s*([\\w\\.\\-_]+)\\s*=\\s*(.*)",""),e=b.mainSection,i=0,a=(new U("\r\n|\r|\n","g")).split(a);i<
a.length;){var l=a[i];++i;if(!c.match(l))if(d.match(l))l=d.matched(1),b.sections.exists(l)?e=b.sections.get(l):(e=new T,b.sections.set(l,e));else if(f.match(l)){var l=f.matched(1),h=f.matched(2),j=h.charCodeAt(0);if((34==j||39==j)&&h.charCodeAt(h.length-1)==j)h=p.substr(h,1,h.length-2);h=D.replace(D.replace(D.replace(D.replace(D.replace(D.replace(h,"\\n","\n"),"\\r","\r"),"\\t","\t"),"\\'","'"),'\\"','"'),"\\\\","\\");e.set(l,h)}}return b};Pa.prototype={__class__:Pa};var Qa=function(a){this.config=
a;this.missingTranslation=new A};Qa.__name__=!0;Qa.parse=function(a){return new Qa(Pa.parse(a))};Qa.prototype={__class__:Qa};var fb=function(){this.success=new A;this.error=new A;this.progressChanged=new ha;this.hasResult=!1;this._total=this._progress=0};fb.__name__=!0;fb.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},
set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:fb,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result"}};var ha=function(a){H.call(this,a)};ha.__name__=!0;ha.__super__=H;ha.prototype=v(H.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==H.DISPATCHING_SENTINEL?
this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ha});var xb=function(a){this.next=null;this.fn=a};xb.__name__=!0;xb.prototype={__class__:xb};var L=function(){};L.__name__=!0;L.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?p.substr(a,b+1,null):null};L.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?p.substr(a,0,b):a};L.getUrlExtension=
function(a){var b=a.lastIndexOf("?");0<=b&&(a=p.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=p.substr(a,b+1,null));return L.getFileExtension(a)};L.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};L.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var f=b[d],e=b[d+1];if(z.is(e,Error)){var i=e.stack;null!=i&&(e=i)}a+=f+"="+z.string(e);d+=2}a+="]"}return a};var ea=function(){this.h={}};ea.__name__=!0;ea.__interfaces__=
[ac];ea.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:ea};var T=function(){this.h={}};T.__name__=!0;T.__interfaces__=[ac];T.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&
a.push(b.substr(1));return p.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:T};var cc=function(){};cc.__name__=!0;cc.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var Ub=function(a){this.__x=a};Ub.__name__=!0;Ub.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==k.Document?"Document":this.__x.get_nodeName())+
" is missing element "+a;return new Sa(b)},__class__:Ub};var Vb=function(a){this.__x=a};Vb.__name__=!0;Vb.prototype={__class__:Vb};var Wb=function(a){this.__x=a};Wb.__name__=!0;Wb.prototype={__class__:Wb};var Xb=function(a){this.__x=a};Xb.__name__=!0;Xb.prototype={__class__:Xb};var Yb=function(a){this.__x=a};Yb.__name__=!0;Yb.prototype={__class__:Yb};var Sa=function(a){if(a.nodeType!=k.Document&&a.nodeType!=k.Element)throw"Invalid nodeType "+z.string(a.nodeType);this.x=a;this.node=new Ub(a);this.nodes=
new Yb(a);this.att=new Vb(a);this.has=new Wb(a);this.hasNode=new Xb(a)};Sa.__name__=!0;Sa.prototype={get_name:function(){return this.x.nodeType==k.Document?"Document":this.x.get_nodeName()},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==k.PCData&&c.nodeType==k.CData&&""==D.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==k.PCData&&""==D.trim(b.get_nodeValue())&&null==a.next()))return c.get_nodeValue();
throw this.get_name()+" does not only have data";}if(b.nodeType!=k.PCData&&b.nodeType!=k.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},__class__:Sa,__properties__:{get_innerData:"get_innerData",get_name:"get_name"}};var fa=function(){};fa.__name__=!0;fa.parse=function(a){var b=k.createDocument();fa.doParse(a,0,b);return b};fa.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,f=1,e=1,i=null,l=0,h=0,j=0,m=a.charCodeAt(b),n=new Ta;m==m;){switch(f){case 0:switch(m){case 10:case 13:case 9:case 32:break;
default:f=e;continue}break;case 1:switch(m){case 60:f=0;e=2;break;default:l=b;f=13;continue}break;case 13:60==m?(e=k.createPCData(n.b+p.substr(a,l,b-l)),n=new Ta,c.addChild(e),h++,f=0,e=2):38==m&&(n.addSub(a,l,b-l),f=18,e=13,l=b+1);break;case 17:93==m&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(f=k.createCData(p.substr(a,l,b-l)),c.addChild(f),h++,b+=2,f=1);break;case 2:switch(m){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=p.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;f=
17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=p.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;f=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;f=15}l=b+1;break;case 63:f=14;l=b;break;case 47:if(null==c)throw"Expected node name";l=b+1;f=0;e=10;break;default:f=3;l=b;continue}break;case 3:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(b==l)throw"Expected node name";d=k.createElement(p.substr(a,
l,b-l));c.addChild(d);f=0;e=4;continue}break;case 4:switch(m){case 47:f=11;h++;break;case 62:f=9;h++;break;default:f=5;l=b;continue}break;case 5:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(l==b)throw"Expected attribute name";i=p.substr(a,l,b-l);if(d.exists(i))throw"Duplicate attribute";f=0;e=6;continue}break;case 6:switch(m){case 61:f=0;e=7;break;default:throw"Expected =";}break;case 7:switch(m){case 34:case 39:f=8;l=b;break;default:throw'Expected "';}break;case 8:m==
a.charCodeAt(l)&&(e=p.substr(a,l+1,b-l-1),d.set(i,e),f=0,e=4);break;case 9:l=b=fa.doParse(a,b,d);f=1;break;case 11:switch(m){case 62:f=1;break;default:throw"Expected >";}break;case 12:switch(m){case 62:return 0==h&&c.addChild(k.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(l==b)throw"Expected node name";if(p.substr(a,l,b-l)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";f=0;e=12;continue}break;case 15:45==
m&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(k.createComment(p.substr(a,l,b-l))),b+=2,f=1);break;case 16:91==m?j++:93==m?j--:62==m&&0==j&&(c.addChild(k.createDocType(p.substr(a,l,b-l))),f=1);break;case 14:63==m&&62==a.charCodeAt(b+1)&&(b++,f=p.substr(a,l+1,b-l-2),c.addChild(k.createProcessingInstruction(f)),f=1);break;case 18:59==m&&(l=p.substr(a,l,b-l),35==l.charCodeAt(0)?(l=120==l.charCodeAt(1)?z.parseInt("0"+p.substr(l,1,l.length-1)):z.parseInt(p.substr(l,1,l.length-1)),n.add(String.fromCharCode(l))):
fa.escapes.exists(l)?n.add(fa.escapes.get(l)):n.b+=z.string("&"+l+";"),l=b+1,f=e)}m=D.fastCodeAt(a,++b)}1==f&&(l=b,f=13);if(13==f)return(b!=l||0==h)&&c.addChild(k.createPCData(n.b+p.substr(a,l,b-l))),b;throw"Unexpected end";};var F=function(){};F.__name__=!0;F.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};F.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof
Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var g=d++,c=2!=g?c+(","+F.__string_rec(a[g],b)):c+F.__string_rec(a[g],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)g=e++,d+=(0<g?",":"")+F.__string_rec(a[g],b);return d+"]"}try{d=a.toString}catch(i){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==
c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+F.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};F.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var g=d++,g=c[g];if(g==b||F.__interfLoop(g,b))return!0}return F.__interfLoop(a.__super__,b)};F.__instanceof=function(a,b){if(null==
b)return!1;switch(b){case jc:return(a|0)===a;case gc:return"number"==typeof a;case hc:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case kc:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||F.__interfLoop(F.getClass(a),b)))return!0}else return!1;return b==lc&&null!=a.__name__||b==mc&&null!=a.__ename__?!0:a.__enum__==b}};F.__cast=function(a,b){if(F.__instanceof(a,b))return a;throw"Cannot cast "+z.string(a)+
" to "+z.string(b);};var vb=function(){this.root=(new I).add(new Oa);var a=this;e.systemBg.color=16777215;e.addPatternSprite(this.root,e.halfWidth,e.halfHeight-1,"bg",6E3,1079,1,1,!0).owner.add(new X(50));var b=e.addFillSprite(this.root,0,0,16711680,0,0,1,!1),c=e.addImageSprite(this.root,e.halfWidth,e.halfHeight,"mountain");c.owner.add(new X(40));this.addBgCloud(b.owner,-4E3);this.addBgCloud(b.owner,-3500);this.addBgCloud(b.owner,-3E3);this.addBgCloud(b.owner,-2500);this.addBgCloud(b.owner,-2E3);
this.addBgCloud(b.owner,-1500);this.addBgCloud(b.owner,-1E3);this.addBgCloud(b.owner,-500);this.addBgCloud(b.owner,0);e.addDelay(this.root,8,function(){a.addBgCloud(b.owner)},!0);e.addEmitterSprite(c.owner,379,580,"fx/smoke",0.5,0.5);e.addEmitterSprite(c.owner,1185,665,"fx/smoke",0.8,0.5);e.addEmitterSprite(c.owner,1532,618,"fx/smoke",1,0.6);var d=e.addImageSprite(this.root,-1432,e.height-273,"tracks",1,1,!1);this.addMsg1(null);var f=e.addImageSprite(this.root,-2,835,"snowman",1,1,!1);f.owner.add(new Aa);
f.anchorY.set__(f.getNaturalHeight());e.addDelay(this.root,3,function(){ca.tween(f,0.3,{scaleY:0.95},0,null,G.cubeOut);ca.tween(f,0.3,{scaleY:1},0.4,null,G.cubeIn)},!0);c=e.addImageSprite(f.owner,-615,100,"card",1,1,!1);ca.tween(d,5,{x:50},0,null,G.cubeOut);ca.tween(f,5,{x:1480},0,null,G.cubeOut);e.addDelay(this.root,0.5,function(){f.owner.add(new tb(!1,!0,0,0,0.3,new Ea(520,0,1546,0)))});d=e.addImageSprite(this.root,1720,e.height-70,"branch");d.disablePointer();d.owner.add(new X(18));d=e.addImageSprite(this.root,
1820,e.height-205,"sound_btn_bg");d.disablePointer();d.owner.add(new X(15));d=e.addImageSprite(this.root,1480,e.height,"logo_bg",1,0,!0);d.anchorY.set__(d.getNaturalHeight());d.owner.add(new X(15));var g=d.rotation;g.set__(g._value-180);ca.tween(d,0.6,{rotation:0,alpha:1},3,null,G.backOut);g=e.addMuteButton(this.root,1820,1020,"btn_sound_on","btn_sound_off",u.isMuted);g.owner.add(new X(15));g.owner.parent.firstChild.next._compMap.Sprite_4.owner.add(new X(15));e.switchPack(1);var g=d.getNaturalWidth()/
2,i=d.getNaturalHeight()/2+15;e.addButton(d.owner,g,i,"logo",function(){e.openUrl(B.logoUrl)});u.soundsFolder="";u.playSoundtrack("soundtrack",1);e.switchPack(0);this.addMsg2(c);e.addEmitterSprite(this.root,e.halfWidth,-50,"fx/snow").owner.add(new X(10))};vb.__name__=!0;vb.prototype={addMsg1:function(){var a=e.addLabel(this.root,e.halfWidth-540,e.halfHeight+280,B.msg1Text,1,1,!1,"fonts/princ_msg_font_80px");a.setAlign(Q.Center);a.setWrapWidth(500);a.setRotation(-5);a.lineSpacing.set__(-15);this.wrapLabelInHeight(a,
"fonts/princ_msg_font",303,80,20,20,!1);a.owner.add(new X(40));a.setAlpha(0);ca.tween(a,1.2,{alpha:1},3.6,null,G.linear)},addMsg2:function(a){var b=a.getNaturalWidth()/2-43,c=a.getNaturalHeight()/2-5,a=e.addLabel(a.owner,b,c,B.msg2Text,1,1,!1,"fonts/msg_font_30px");a.setAlign(Q.Center);a.setWrapWidth(410);a.centerAnchor();a.setRotation(-5);this.wrapLabelInHeight(a,"fonts/msg_font",246,30,14,4,!0)},wrapLabelInHeight:function(a,b,c,d,f,g,i){for(null==i&&(i=!1);a.getNaturalHeight()>c;){d-=g;if(d<f)break;
a.set_font(new na(e.assets,b+"_"+d+"px"));i&&a.centerAnchor()}null},addBgCloud:function(a,b){null==b&&(b=0);var c=e.addImageSprite(a,e.width+2E3+b,e.rand(430),"cloud");c.disablePointer();var d=0.5+e.rand(8)/10;c.setScaleXY(d,d);c.owner.add(new ub(function(a){var b=c.x;b.set__(b._value-50*a);-2E3>c.x._value&&c.owner.dispose()}))},__class__:vb};var u=function(){};u.__name__=!0;u.playSfx=function(a,b){null==b&&(b=1);return u.isMuted?null:e.assets.getSound(u.soundsFolder+""+a).play(b)};u.playSoundtrack=
function(a,b){null==b&&(b=1);var c=e.assets.getSound(u.soundsFolder+""+a);null!=u.cSoundtrackPlayback?u.cSoundtrackPlayback.get_sound()!=c&&(u.cSoundtrackVolume=b,u.cSoundtrackPlayback=c.loop(b)):(u.cSoundtrackVolume=b,u.cSoundtrackPlayback=c.loop(b));return u.cSoundtrackPlayback};u.muteSoundtrack=function(){null!=u.cSoundtrackPlayback&&(u.cSoundtrackPlayback.volume.animateTo(0,1),e.addDelay(null,0.8,function(){u.cSoundtrackPlayback.set_paused(!0)},!1))};u.unmuteSoundtrack=function(){null!=u.cSoundtrackPlayback&&
!u.isMuted&&(u.cSoundtrackPlayback.set_paused(!1),u.cSoundtrackPlayback.volume.animateTo(u.cSoundtrackVolume,1))};u.muteAll=function(){u.isMuted?(u.isMuted=!1,u.unmuteSoundtrack(),j.volume.animateTo(1,0)):(u.isMuted=!0,u.muteSoundtrack(),j.volume.animateTo(0,1))};var ca=function(){};ca.__name__=!0;ca.tween=function(a,b,c,d,e,g){null==d&&(d=0);var i=new za;0>d&&(d=0);if(0==b&&0==d)ca.apply(a,c,e);else{if(0==b&&0<d){var h=new I;0!=d&&i.add(new la(d));i.add(new ka(function(){ca.apply(a,c,e);h.dispose()}));
b=new ra;j.root.addChild(h.add(b))}else{0<d&&i.add(new la(d));for(var d=[],k=0,n=J.fields(c);k<n.length;){var m=n[k];++k;var o=J.getProperty(a,m);d.push(new pb(o,J.field(c,m),b,g))}g=new qb(d);i.add(g);var p=new I;i.add(new la(b));i.add(new ka(function(){null!=e&&e();p.dispose()}));b=new ra;j.root.addChild(p.add(b))}b.run(i)}};ca.apply=function(a,b,c){for(var d=0,e=J.fields(b);d<e.length;){var g=e[d];++d;var i=J.getProperty(a,g);F.__cast(i,n).set__(J.field(b,g))}null!=c&&c()};var e=function(a,b){this.init=
new ha;var c=this;e.width=a;e.height=b;e.halfWidth=a/2|0;e.halfHeight=b/2|0;e.director=(new I).add(new q).add((new nb).setSize(e.width,e.height));j.root.addChild(e.director);e.systemBg=e.initFillSpriteComp(0,0,e.systemBgColor,0,0,1,!1);j.root.add(e.systemBg);j.loadAssetPack(N.fromAssets("boot")).get(function(a){e.assets=a;e.rotPhonePrompt=e.addFillSprite(j.root,0,0,1118481,j._platform.getStage().get_width(),j._platform.getStage().get_height(),1,!1);a=e.addImageSprite(e.rotPhonePrompt.owner,0,0,"rot_phone");
e.defaultOrientation==Y.Landscape&&a.setRotation(90);(e.defaultOrientation==j._platform.getStage().orientation._value||null==j._platform.getStage().orientation._value)&&e.rotPhonePrompt.set_visible(!1);j._platform.getStage().lockOrientation(e.defaultOrientation);j._platform.getStage().requestFullscreen(!0);j._platform.getStage().orientation.get_changed().connect($(c,c.onOrientationChange));j._platform.getStage().resize.connect($(c,c.onResize));c.onResize();c.initPreloaderScene()})};e.__name__=!0;
e.onResizeCallback=function(){};e.onOrientationChangeCallback=function(){};e.goToScene=function(a,b){null==b&&(b=new ob(0.5,G.quadOut));e.director._compMap.Director_8.unwindToScene(a,b)};e.switchPack=function(a){0==a?e.assets=e.mainAssets:1==a&&(e.assets=e.extAssets)};e.initFillSpriteComp=function(a,b,c,d,e,g,i){null==i&&(i=!0);null==g&&(g=1);c=new ab(c,d,e);c.setXY(a,b);c.setAlpha(g);i&&c.centerAnchor();return c};e.initImageSpriteComp=function(a,b,c,d,f,g,i){null==g&&(g=!0);null==f&&(f=1);null==
d&&(d=1);var h=null;""!=c&&(h=e.assets.getTexture(c));null!=i&&(h=h.subTexture(i.x|0,i.y|0,i.width|0,i.height|0));c=new Fa(h);c.setXY(a,b);c.setScale(d);c.setAlpha(f);g&&c.centerAnchor();return c};e.initPatternSpriteComp=function(a,b,c,d,f,g,i,h){null==h&&(h=!0);null==i&&(i=1);null==g&&(g=1);c=new cb(e.assets.getTexture(c),d,f);c.setXY(a,b);c.setScale(g);c.setAlpha(i);h&&c.centerAnchor();return c};e.initTextSpriteComp=function(a,b,c,d,f,g,i){null==i&&(i="");null==g&&(g=!1);null==f&&(f=1);null==d&&
(d=1);null==c&&(c="Label");""==i&&(i=e.defaultFont);c=new eb(new na(e.assets,i),c);c.disablePointer();c.setXY(a,b);c.setScale(d);c.setAlpha(f);g&&c.centerAnchor();return c};e.initEmitterSprite=function(a,b,c,d,f){null==f&&(f=1);null==d&&(d=1);c=(new r(e.assets,c)).createEmitter();c.setXY(a,b);c.setScale(d);c.setAlpha(f);c.disablePointer();return c};e.addFillSprite=function(a,b,c,d,f,g,i,h){null==h&&(h=!0);null==i&&(i=1);var j=new I;j.add(new da);b=e.initFillSpriteComp(b,c,d,f,g,i,h);j.add(b);null!=
a&&a.addChild(j);return b};e.addImageSprite=function(a,b,c,d,f,g,i,h){null==i&&(i=!0);null==g&&(g=1);null==f&&(f=1);var j=new I;j.add(new da);b=e.initImageSpriteComp(b,c,d,f,g,i,h);j.add(b);null!=a&&a.addChild(j);return b};e.addPatternSprite=function(a,b,c,d,f,g,i,h,j){null==j&&(j=!0);null==h&&(h=1);null==i&&(i=1);var k=new I;k.add(new da);b=e.initPatternSpriteComp(b,c,d,f,g,i,h,j);k.add(b);null!=a&&a.addChild(k);return b};e.addLabel=function(a,b,c,d,f,g,i,h){null==h&&(h="");null==i&&(i=!1);null==
g&&(g=1);null==f&&(f=1);null==d&&(d="Label");var j=new I;j.add(new da);b=e.initTextSpriteComp(b,c,d,f,g,i,h);j.add(b);null!=a&&a.addChild(j);return b};e.addButton=function(a,b,c,d,f,g,i,h){null==h&&(h=1);null==i&&(i=1);null==g&&(g="");var j=new I;a.addChild(j);var k=e.addImageSprite(j,b,c,d,i,h,!0).owner;e.useMouseHandCursor&&k.add(new Aa);k.add(new ra);var m=null;""!=g&&(m=e.addImageSprite(j,b,c,g,1,1,!0).owner,e.useMouseHandCursor&&m.add(new Aa),m._compMap.Sprite_4.set_visible(!1));var n=i+0.15,
o=new za;o.add(new ka(function(){k._compMap.Sprite_4.scaleX.animateTo(n,0.2,G.backOut);k._compMap.Sprite_4.scaleY.animateTo(n,0.2,G.backOut)}));o.add(new la(0.2));o.add(new ka(function(){k._compMap.Sprite_4.scaleX.animateTo(i,0.1,G.quadIn);k._compMap.Sprite_4.scaleY.animateTo(i,0.1,G.quadIn)}));a=function(){k._compMap.Script_7.run(o)};b=function(){null!=m&&(0==(m._compMap.Sprite_4._flags&2)?(k._compMap.Sprite_4.set_visible(!1),m._compMap.Sprite_4.set_visible(!0)):(k._compMap.Sprite_4.set_visible(!0),
m._compMap.Sprite_4.set_visible(!1)));""!=e.buttonClickSfx&&u.playSfx(e.buttonClickSfx);null!=f&&f()};k._compMap.Disposer_6.connect1(k._compMap.Sprite_4.get_pointerDown(),a);k._compMap.Disposer_6.connect1(k._compMap.Sprite_4.get_pointerUp(),b);null!=m&&(m._compMap.Disposer_6.connect1(m._compMap.Sprite_4.get_pointerDown(),a),m._compMap.Disposer_6.connect1(m._compMap.Sprite_4.get_pointerUp(),b));return z.instance(k._compMap.Sprite_4,Fa)};e.addMuteButton=function(a,b,c,d,f,g,i,h){null==h&&(h=1);null==
i&&(i=1);return e.addButton(a,b,c,d,function(){u.muteAll()},f,i,h)};e.addDelay=function(a,b,c,d,e){null==e&&(e=-1);null==d&&(d=!1);var g=new I,i=new za;i.add(new la(b));i.add(new ka(function(){null!=c&&c();d||g.dispose()}));b=new ra;g.add(new da);g.add(b);null!=a&&a.addChild(g);d?b.run(new rb(i,e)):b.run(i);return g};e.addEmitterSprite=function(a,b,c,d,f,g){null==g&&(g=1);null==f&&(f=1);var i=new I;i.add(new da);b=e.initEmitterSprite(b,c,d,f,g);i.add(b);null!=a&&a.addChild(i);return b};e.openUrl=
function(a){j._platform.getWeb().openBrowser("http://"+a)};e.rand=function(a){return z.random(a)};e.localPointerX=function(){return(j._platform.getPointer().get_x()-(j._platform.getStage().get_width()-e.width*e.scale)/2)/e.scale};e.localPointerY=function(){var a=0;"top"==e.rootContYAlign?a=j._platform.getPointer().get_y():"middle"==e.rootContYAlign?a=j._platform.getPointer().get_y()-(j._platform.getStage().get_height()-e.height*e.scale)/2:"bottom"==e.rootContYAlign&&(a=j._platform.getPointer().get_y()-
(j._platform.getStage().get_height()-e.height*e.scale));return a/e.scale};e.prototype={onResize:function(){var a=j._platform.getStage().get_width(),b=j._platform.getStage().get_height();e.scale=Math.min(a/e.width,b/e.height);var c=0;"top"==e.rootContYAlign?c=0:"middle"==e.rootContYAlign?c=0.5*b-0.5*e.scale*e.height:"bottom"==e.rootContYAlign&&(c=b-e.scale*e.height);e.director._compMap.Sprite_4.setXY(0.5*a-0.5*e.scale*e.width,c);e.director._compMap.Sprite_4.setScale(e.scale);e.maskRootCont&&(e.director._compMap.Sprite_4.scissor=
new Ea(0,0,e.width,e.height));e.systemBg.setXY(0,0);e.systemBg.setSize(a,b);e.onResizeCallback();e.rotPhonePrompt.setXY(0,0);e.rotPhonePrompt.setSize(j._platform.getStage().get_width(),j._platform.getStage().get_height());e.rotPhonePrompt.owner.firstChild._compMap.Sprite_4.setXY(e.rotPhonePrompt.width._value/2,e.rotPhonePrompt.height._value/2);e.rotPhonePrompt.owner.firstChild._compMap.Sprite_4.setScale(e.scale)},onOrientationChange:function(a){e.onOrientationChangeCallback();e.defaultOrientation!=
a?e.rotPhonePrompt.set_visible(!0):e.rotPhonePrompt.set_visible(!1)},initPreloaderScene:function(){var a=this,b=(new I).add(new Oa),c=e.addFillSprite(b,0,0,e.systemBgColor,e.width,e.height,1,!1),d=e.addImageSprite(c.owner,e.halfWidth,e.halfHeight,"preloader"),f=j.loadAssetPack(N.fromAssets(e.mainAssetsFolder));f.get(function(f){e.mainAssets=f;e.assets=e.mainAssets;e.settings=Qa.parse(f.getFile("settings.ini").toString());null!=e.extManifest?(f=j._platform.loadAssetPack(e.extManifest),f.get(function(d){e.extAssets=
d;b.removeChild(c.owner);a.init.emit()}),f.progressChanged.connect(function(){var a=d.rotation;a.set__(a._value+50)})):(b.removeChild(c.owner),a.init.emit())});f.progressChanged.connect(function(){var a=d.rotation;a.set__(a._value+50)});e.goToScene(b)},__class__:e};var Aa=function(){t.call(this)};Aa.__name__=!0;Aa.__super__=t;Aa.prototype=v(t.prototype,{get_name:function(){return"ButtonCursorComp_3"},onAdded:function(){this.owner._compMap.Disposer_6.connect1(this.owner._compMap.Sprite_4.get_pointerIn(),
$(this,this.onPointerIn));this.owner._compMap.Disposer_6.connect1(this.owner._compMap.Sprite_4.get_pointerMove(),$(this,this.onPointerMove));this.owner._compMap.Disposer_6.connect1(this.owner._compMap.Sprite_4.get_pointerOut(),$(this,this.onPointerOut))},onPointerIn:function(){j._platform.getMouse().set_cursor(R.Button)},onPointerMove:function(a){a.hit==this.owner._compMap.Sprite_4&&j._platform.getMouse().set_cursor(R.Button)},onPointerOut:function(){j._platform.getMouse().set_cursor(R.Default)},
__class__:Aa});var tb=function(a,b,c,d,e,g){null==e&&(e=0.15);null==d&&(d=0);null==c&&(c=0);null==b&&(b=!1);null==a&&(a=!1);t.call(this);this.lockX=a;this.lockY=b;this.offsetX=c;this.offsetY=d;this.scrollSmooth=e;this.clampRect=g};tb.__name__=!0;tb.__super__=t;tb.prototype=v(t.prototype,{get_name:function(){return"DragComp_11"},onAdded:function(){this.owner._compMap.Disposer_6.connect1(this.owner._compMap.Sprite_4.get_pointerDown(),$(this,this.onPointerDown));this.ownerSprite=this.owner._compMap.Sprite_4;
this.endX=this.ownerSprite.x._value;this.endY=this.ownerSprite.y._value;this.wasDragged=!1},onUpdate:function(a){if(this.dragging)if(this.wasDragged=!0,j._platform.getPointer().isDown()){if(!this.lockX){var b=this.ownerSprite.x;b.set__(b._value+(e.localPointerX()-this.ownerSprite.x._value)/this.scrollSmooth*a);null!=this.clampRect&&this.ownerSprite.x.set__(V.clamp(this.ownerSprite.x._value,this.clampRect.x,this.clampRect.width));this.endX=e.localPointerX()}this.lockY||(b=this.ownerSprite.y,b.set__(b._value+
(e.localPointerY()-this.ownerSprite.y._value)/this.scrollSmooth*a),null!=this.clampRect&&this.ownerSprite.y.set__(V.clamp(this.ownerSprite.y._value,this.clampRect.y,this.clampRect.height)),this.endY=e.localPointerY())}else this.dragging=!1;else this.wasDragged&&(this.lockX||(b=this.ownerSprite.x,b.set__(b._value+(this.endX-this.ownerSprite.x._value)/this.scrollSmooth*a),null!=this.clampRect&&this.ownerSprite.x.set__(V.clamp(this.ownerSprite.x._value,this.clampRect.x,this.clampRect.width))),this.lockY||
(b=this.ownerSprite.y,b.set__(b._value+(this.endY-this.ownerSprite.y._value)/this.scrollSmooth*a),null!=this.clampRect&&this.ownerSprite.y.set__(V.clamp(this.ownerSprite.y._value,this.clampRect.y,this.clampRect.height))))},onPointerDown:function(){this.dragging=!0},__class__:tb});var X=function(a,b){null==b&&(b=0.3);t.call(this);this.speed=a;this.tweenTime=b};X.__name__=!0;X.__super__=t;X.prototype=v(t.prototype,{get_name:function(){return"ParallaxMouseComp_1"},onAdded:function(){this.ownerSprite=
this.owner._compMap.Sprite_4;this.sX=this.ownerSprite.x._value;this.prevPointerX=j._platform.getPointer().get_x()},onUpdate:function(){j._platform.getPointer().get_x()!=this.prevPointerX&&this.ownerSprite.x.animateTo(this.sX-(j._platform.getPointer().get_x()-j._platform.getStage().get_width()/2)/this.speed,this.tweenTime);this.prevPointerX=j._platform.getPointer().get_x()},__class__:X});var ub=function(a){t.call(this);this.updateF=a};ub.__name__=!0;ub.__super__=t;ub.prototype=v(t.prototype,{get_name:function(){return"UpdateComp_0"},
onUpdate:function(a){this.updateF(a)},__class__:ub});var $b=function(){};$b.__name__=!0;$b.parseQueryString=function(a,b){for(var c=a.split("&"),d,e=0,g=c.length;e<g;)if(d=e++,d=c[d].split("="),d[0]==b)return d[1];return""};var ic=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.__name__=
!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var jc={__name__:["Int"]},kc={__name__:["Dynamic"]},gc=Number;gc.__name__=["Float"];var hc=Boolean;hc.__ename__=["Bool"];var lc={__name__:["Class"]},mc={};k.Element="element";k.PCData="pcdata";k.CData="cdata";k.Comment="comment";k.DocType="doctype";k.ProcessingInstruction="processingInstruction";k.Document="document";ga.instance=new ga;H.DISPATCHING_SENTINEL=new va(null,null);j.root=new I;j.uncaughtError=new A;j.hidden=new O(!1);j.volume=new n(1);
j._platform=ga.instance;j._calledInit=!1;N.__meta__={obj:{assets:[{main:[{bytes:9258,md5:"d3daa945fa4700c7dcf8845bcff890fa",name:"bg.png"},{bytes:19609,md5:"9397cc12bbe78718c3e4ebaade2cd8df",name:"branch.png"},{bytes:1581,md5:"9d0d59e4f30f2c228fd80d8e35db4b8a",name:"btn_sound_off.png"},{bytes:2412,md5:"b83673469671ae17c3eea3742051e093",name:"btn_sound_on.png"},{bytes:14626,md5:"56d8c34aaf1b460a2fc5772e06317d3e",name:"card.png"},{bytes:7727,md5:"a204564da2e0eda2851cbe838a572997",name:"cloud.png"},
{bytes:22501,md5:"150b5d3ee638b5eed99df8bb93560075",name:"debug_font.fnt"},{bytes:16702,md5:"736b0c441c9ef9887af6661d36267ee6",name:"debug_font.png"},{bytes:49067,md5:"8aef7dbdcd29d7025814d632b8925295",name:"fonts/msg_font_14px.fnt"},{bytes:10047,md5:"0d2cc66f5249d318627fd7d26030eb8e",name:"fonts/msg_font_14px.png"},{bytes:71654,md5:"009a268142aba114075a4bfe0fb6ed76",name:"fonts/msg_font_18px.fnt"},{bytes:13489,md5:"80617ee584a22fd575dbdace3de61d92",name:"fonts/msg_font_18px.png"},{bytes:86745,md5:"aa6b79ccd26ca3a8ec4554ce546a18a6",
name:"fonts/msg_font_22px.fnt"},{bytes:17180,md5:"d0f361ba3357174d3238c00acea34ee1",name:"fonts/msg_font_22px.png"},{bytes:94985,md5:"20fc13117019b74fa9410375c5b39bed",name:"fonts/msg_font_26px.fnt"},{bytes:21277,md5:"2e70448e31ac90c698d3f64e96592dc5",name:"fonts/msg_font_26px.png"},{bytes:95086,md5:"d41ec06cd7479e9b6874f72c794ae44a",name:"fonts/msg_font_30px.fnt"},{bytes:24658,md5:"5233018461d095fc3d7d076476d48d9a",name:"fonts/msg_font_30px.png"},{bytes:53391,md5:"26c2f3d88d33142d57b7ccac8b38c5f2",
name:"fonts/princ_msg_font_20px.fnt"},{bytes:43202,md5:"35afe0b8dc9224b8675fbef0af088f16",name:"fonts/princ_msg_font_20px.png"},{bytes:53442,md5:"769c12e94e810c807f868870d811dd08",name:"fonts/princ_msg_font_40px.fnt"},{bytes:49366,md5:"95b5c7e0158efdf4a2aaebfe5e0ed2a0",name:"fonts/princ_msg_font_40px.png"},{bytes:56023,md5:"c6606ceb3aa785b7d68bc42a8265a392",name:"fonts/princ_msg_font_60px.fnt"},{bytes:82197,md5:"4bc03d30bba78b27f673d3f19d320800",name:"fonts/princ_msg_font_60px.png"},{bytes:58076,
md5:"dd8a2da1a7b6093ddffec8ebc413a65d",name:"fonts/princ_msg_font_80px.fnt"},{bytes:120575,md5:"cba2c40242e791be7a97c2d1d1f2fd74",name:"fonts/princ_msg_font_80px.png"},{bytes:1401,md5:"485ebeb67bfa293a5abd83848c9018af",name:"fx/smoke.pex"},{bytes:1535,md5:"9dab89e0ca27f318b23c8e66b09f995c",name:"fx/smoke.png"},{bytes:1392,md5:"21ecd9fe3aabcf90f161731a42dc4382",name:"fx/snow.pex"},{bytes:166,md5:"06603f74fd1df9e7cb92b3232c57214b",name:"fx/snow.png"},{bytes:6431,md5:"13583fac18ca8cfa69fb5b1f5969233d",
name:"logo_bg.png"},{bytes:125283,md5:"4c57d0d9a13f1b037796b93369574bbf",name:"mountain.png"},{bytes:0,md5:"7c3560a0ef91db57dc8d180067e9da59",name:"settings.ini"},{bytes:32962,md5:"7a23c810b0526a72f7eda8a06c17c1c9",name:"snowman.png"},{bytes:10452,md5:"af706839c9e45df6f339c4eb70f6abde",name:"sound_btn_bg.png"},{bytes:1146,md5:"14fc40e8b2f1b2f0e0ba0792ecd21fd9",name:"tracks.png"}],boot:[{bytes:2638,md5:"56bc969bddfb2ebe70e317cea65bef15",name:"preloader.png"},{bytes:12539,md5:"393f49e00958ef6077f345c09fd58a28",
name:"rot_phone.png"}]}]}};N._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();q._scratchPoint=new Bb;na.NEWLINE=new bb(10);S._sharedEvent=new Hb;K._sharedEvent=new Ib;ua.CANVAS_TEXTURES=(new U("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);y._mediaRefCount=0;y._detectBlobSupport=!1;o.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];o.SHOULD_HIDE_MOBILE_BROWSER=window.top==
window&&(new U("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);x._detectSupport=!0;fa.escapes=function(){var a=new T;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);u.soundsFolder="sounds/";u.isMuted=!1;e.mainAssetsFolder="main";e.defaultOrientation=Y.Portrait;e.defaultFont="default_font";e.systemBgColor=3355443;e.buttonClickSfx="";e.maskRootCont=!0;e.rootContYAlign="middle";e.useMouseHandCursor=
!1;B.main()})();
